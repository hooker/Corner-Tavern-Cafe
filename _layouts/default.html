<!doctype html>
<html>
<head>
<title>Corner Tavern & Caf√©</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/assets/css/styles.css">
<link rel="stylesheet" href="https://use.typekit.net/tss3usf.css">
</head>
<body class="page">
<header class="header page__header">
	{% include header.html %}
</header>
<main class="menu page__menu" id="menu">
	{% include menu.html %}
</main> <!-- End 'menu' section -->
<main class="info page__info" id="info">
	{% include info.html %}
</main> <!-- End 'info' section -->
<main class="featured page__featured" id="featured">
	{% include featured.html %}
</main> <!-- End 'info' section -->
<footer class="footer page__footer">
	{% include footer.html %}
</footer>
<script src="/assets/js/jquery-3.3.1.js"></script>
<script>
$( document ).ready(function() {
	var $facade = $( ".facade__featured-spirits" );
	
	var $featuredSpirits = $( "#featuredSpirits" );
	var featuredSpiritsBounds = {};
	featuredSpiritsBounds.top = $featuredSpirits.offset().top;
	featuredSpiritsBounds.bottom = $featuredSpirits.height() + featuredSpiritsBounds.top;
	
	/* Calculate initial viewport size */
	/* First determine height of the header */
	var headerHeight = $( ".header" ).outerHeight();
	/* Use the header height to offset the area to watch */
	var viewport = {};
	viewport.top = $( window ).scrollTop() + headerHeight;
	viewport.bottom = viewport.top + headerHeight;
	
	/* Update viewport size if window changes size */
	$( window ).resize(function( event ) {
		headerHeight = $( ".header" ).outerHeight();
		viewport.top = $( window ).scrollTop() + headerHeight;
		viewport.bottom = viewport.top + headerHeight;
		console.log("Viewport changed: " + JSON.stringify(viewport, null, 2));
	});
	
	/* Handle scroll events */
	var scrollTimeout; // global variable to limit scroll handler frequency
	$( window ).scroll(function( event ) {
		if (!scrollTimeout) {		
			scrollTimeout = setTimeout(scrollHandler, 2500);
		}
	});
	
	var scrollHandler = function() {
		viewport.top = $( window ).scrollTop() + headerHeight;
		viewport.bottom = viewport.top + headerHeight;
		if ((
		     (featuredSpiritsBounds.top > viewport.top) && 
		     (featuredSpiritsBounds.top < viewport.bottom)
		    ) || (
		     (featuredSpiritsBounds.bottom > viewport.top) &&
		     (featuredSpiritsBounds.bottom < viewport.bottom)
		    ) || (
		     (featuredSpiritsBounds.top < viewport.top) &&
		     (featuredSpiritsBounds.bottom > viewport.bottom)
		    )) {
			$facade.addClass( "facade__featured-spirits_lit" );
			     
		} else {
			$facade.removeClass( "facade__featured-spirits_lit" );
		}
		scrollTimeout = clearTimeout(scrollTimeout);
	};
});
</script>
</body>
</html>